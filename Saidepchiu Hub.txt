_G.AutoFarm = true
_G.FastAttack = true

repeat task.wait() until game:IsLoaded()

local function JoinTeam()
    pcall(function()
        if game.Players.LocalPlayer.Team == nil then
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer("SetTeam", "Marine")
        end
    end)
end

local function Tween(Target)
    local Character = game.Players.LocalPlayer.Character
    local RootPart = Character:WaitForChild("HumanoidRootPart")
    local Distance = (RootPart.Position - Target.p).Magnitude
    local Speed = 300
    game:GetService("TweenService"):Create(RootPart, TweenInfo.new(Distance/Speed, Enum.EasingStyle.Linear), {CFrame = Target}):Play()
end

local function Attack()
    game:GetService("VirtualUser"):CaptureController()
    game:GetService("VirtualUser"):Button1Down(Vector2.new(1280, 672))
end

spawn(function()
    JoinTeam()
    while _G.AutoFarm do
        task.wait(0.1)
        pcall(function()
            local Enemies = game.Workspace.Enemies:GetChildren()
            for _, v in pairs(Enemies) do
                if v:FindFirstChild("Humanoid") and v.Humanoid.Health > 0 then
                    repeat
                        task.wait()
                        Tween(v.HumanoidRootPart.CFrame * CFrame.new(0, 10, 0))
                        if _G.FastAttack then Attack() end
                    until not v.Parent or v.Humanoid.Health <= 0 or not _G.AutoFarm
                end
            end
        end)
    end
end)
